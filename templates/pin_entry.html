<div id="keypad"></div>
<form id="pinForm" method="POST" action="/submit_pin">
    <input type="hidden" name="pin" id="hiddenPin">
</form>

<script>
const display = document.getElementById("display");
const keypad = document.getElementById("keypad");
const hiddenPin = document.getElementById("hiddenPin");
const form = document.getElementById("pinForm");

const keys = ['1','2','3','4','5','6','7','8','9','0','⌫','C']; // Added backspace

keys.forEach(k => {
    const btn = document.createElement("button");
    btn.type = "button";
    btn.textContent = k;
    btn.onclick = () => {
        let current = display.textContent.replace(/-/g,''); // remove placeholders
        if(k === 'C') {
            current = '';
        } else if(k === '⌫') {
            current = current.slice(0, -1); // remove last character
        } else if(current.length < 4) {
            current += k;
        }

        display.textContent = current.padEnd(4,'-'); // show with placeholders
        hiddenPin.value = current;

        if(current.length === 4) {
            form.submit();
        }
    };
    keypad.appendChild(btn);
});
</script>
